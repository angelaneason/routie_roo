{
  "query": "INSERT INTO reschedule_history (userId, waypointId, routeId, routeName, contactName, address, originalDate, rescheduledDate, missedReason, status, createdAt)\nSELECT \n  r.userId,\n  rw.id as waypointId,\n  r.id as routeId,\n  r.name as routeName,\n  rw.contactName,\n  rw.address,\n  r.scheduledDate as originalDate,\n  rw.rescheduledDate,\n  rw.missedReason,\n  'pending' as status,\n  NOW() as createdAt\nFROM route_waypoints rw\nJOIN routes r ON rw.routeId = r.id\nWHERE rw.status = 'missed' \n  AND rw.rescheduledDate IS NOT NULL\n  AND NOT EXISTS (\n    SELECT 1 FROM reschedule_history rh \n    WHERE rh.waypointId = rw.id\n  );",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3nFpALUewgkhNV8.bafe9024b59b --database gdFesFzxMsSKJbuPWiaC7y --execute INSERT INTO reschedule_history (userId, waypointId, routeId, routeName, contactName, address, originalDate, rescheduledDate, missedReason, status, createdAt)\nSELECT \n  r.userId,\n  rw.id as waypointId,\n  r.id as routeId,\n  r.name as routeName,\n  rw.contactName,\n  rw.address,\n  r.scheduledDate as originalDate,\n  rw.rescheduledDate,\n  rw.missedReason,\n  'pending' as status,\n  NOW() as createdAt\nFROM route_waypoints rw\nJOIN routes r ON rw.routeId = r.id\nWHERE rw.status = 'missed' \n  AND rw.rescheduledDate IS NOT NULL\n  AND NOT EXISTS (\n    SELECT 1 FROM reschedule_history rh \n    WHERE rh.waypointId = rw.id\n  );",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 63
}